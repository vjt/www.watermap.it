/**
 * History/Remote - jQuery plugin for enabling history support and bookmarking
 * @requires jQuery v1.0.3
 *
 * http://stilbuero.de/jquery/history/
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Version: 0.2.3
 *
 * Minified by vjt@openssl.it using YUI online compressor:
 * http://yui.2clics.net/
 */
(function(a){a.ajaxHistory=new function(){var d="historyReset";var b=location.hash;var e=null;var g;this.update=function(){};var c=function(){a(".remote-output").empty()};a(document).bind(d,c);if(a.browser.msie){var h,f=false;a(function(){h=a('<iframe style="display: none;"></iframe>').appendTo(document.body).get(0);var i=h.contentWindow.document;i.open();i.close();if(b&&b!="#"){i.location.hash=b.replace("#","")}});this.update=function(j){b=j;var i=h.contentWindow.document;i.open();i.close();i.location.hash=j.replace("#","")};g=function(){var j=h.contentWindow.document;var i=j.location.hash;if(i!=b){b=i;if(i&&i!="#"){a('a[href$="'+i.replace("#/","")+'"]').click();location.hash=i}else{if(f){location.hash="";a(document).trigger(d)}}}f=true}}else{if(a.browser.mozilla||a.browser.opera||a.browser.safari){this.update=function(i){b=i};g=function(){if(location.hash){if(b!=location.hash){b=location.hash;a('a[href$="'+b.replace("#/","")+'"]').click()}}else{if(b){b="";a(document).trigger(d)}}}}}this.initialize=function(i){if(typeof i=="function"){a(document).unbind(d,c).bind(d,i)}if(location.hash&&typeof _addHistory=="undefined"){a('a[href$="'+location.hash+'"]').trigger("click")}if(g&&e==null){e=setInterval(g,200)}}};a.fn.remote=function(b,c,e){e=e||function(){};if(typeof c=="function"){e=c}c=a.extend({hashPrefix:"remote-"},c||{});var d=a(b).size()&&a(b)||a("<div></div>").appendTo("body");d.addClass("remote-output");return this.each(function(h){var g=this.href,j="#"+(this.title&&this.title.replace(/\s/g,"_")||c.hashPrefix+(h+1)),f=this;this.href=j;a(this).click(function(i){if(!d.locked){if(i.clientX){a.ajaxHistory.update(j)}d.load(g,function(){d.locked=null;e.apply(f)})}})})};a.fn.history=function(b){return this.click(function(c){if(c.clientX){if(this.hash==location.hash){return false}a.ajaxHistory.update(this.hash)}if(typeof b=="function"){b.call(this)}})}})(jQuery);
